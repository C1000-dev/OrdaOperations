<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Members - ORDA</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .members-page{padding:120px 20px 60px;background:#000;min-height:100vh}
        .search-container{max-width:600px;margin:0 auto 40px;position:relative}
        .search-input{width:100%;padding:18px 20px;background:#1a1a1a;border:2px solid rgba(255,255,255,0.2);color:#fff;font-size:16px;outline:none;font-family:inherit;letter-spacing:1px}
        .search-input:focus{border-color:#fff}
        .search-results{background:#1a1a1a;border:2px solid rgba(255,255,255,0.1);max-height:400px;overflow-y:auto;position:absolute;width:100%;top:100%;left:0;display:none;z-index:100}
        .search-results.active{display:block}
        .search-result-item{padding:15px 20px;border-bottom:1px solid rgba(255,255,255,0.1);cursor:pointer;transition:background 0.2s;display:flex;justify-content:space-between;align-items:center}
        .search-result-item:hover{background:rgba(255,255,255,0.05)}
        .result-username{font-weight:700;font-size:16px}
        .result-rank{font-size:13px;color:#888;margin-top:3px}
        .view-profile-btn{background:#fff;color:#000;padding:8px 20px;font-size:12px;font-weight:700;border:none;cursor:pointer;transition:all 0.3s}
        .view-profile-btn:hover{background:#000;color:#fff;outline:2px solid #fff}
        .all-members-title{text-align:center;font-size:24px;font-weight:900;margin:60px 0 30px;letter-spacing:2px}
        .members-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;max-width:1200px;margin:0 auto}
        .member-card{background:#1a1a1a;padding:25px;border:1px solid rgba(255,255,255,0.1);text-align:center;transition:all 0.3s;cursor:pointer}
        .member-card:hover{border-color:rgba(255,255,255,0.3);transform:translateY(-5px)}
        .member-avatar{width:70px;height:70px;border-radius:50%;background:#000;margin:0 auto 15px;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:900;border:2px solid #fff}
        .member-name{font-size:18px;font-weight:900;margin-bottom:5px;display:flex;align-items:center;justify-content:center;gap:8px}
        .member-rank-label{font-size:13px;color:#888}
        .no-results{text-align:center;padding:40px;color:#888}
        .verify-gold{color:#ffd700;filter:drop-shadow(0 0 5px #ffd700);animation:goldSparkle 2s ease-in-out infinite}
        @keyframes goldSparkle{0%,100%{filter:drop-shadow(0 0 5px #ffd700)}50%{filter:drop-shadow(0 0 15px #ffd700)}}
        .verify-red{color:#ff0000}
        .verify-black{color:#fff}
        .verify-blue{color:#00bfff;filter:drop-shadow(0 0 5px #00bfff)}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="logo-transparent.png" alt="ORDA" class="nav-logo-img">
                <span class="logo-text">ORDER OF RUTHLESS DOMINION AND AUTHORITY</span>
            </div>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="index.html#about">ABOUT</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">FEATURES ‚ñæ</a>
                    <ul class="dropdown-menu">
                        <li><a href="games.html">GAMES</a></li>
                        <li><a href="ranks.html">RANKS</a></li>
                        <li><a href="ratings.html">RATINGS</a></li>
                    </ul>
                </li>
                <li><a href="hall-of-shame.html" class="nav-rainbow">HALL OF SHAME</a></li>
                <li class="dropdown members-only">
                    <a href="#" class="dropdown-toggle">COMMUNICATIONS ‚ñæ</a>
                    <ul class="dropdown-menu">
                        <li><a href="members.html">üîç Search Members</a></li>
                        <li><a href="chats.html">üí¨ Chats</a></li>
                    </ul>
                </li>
            </ul>
            <div class="nav-buttons">
                <a href="login.html" class="nav-signin">SIGN IN</a>
                <a href="https://discord.gg/hePEwEnukn" target="_blank" class="nav-button">JOIN SERVER</a>
            </div>
        </div>
    </nav>

    <div class="members-page">
        <div class="container">
            <h1 style="text-align:center;font-size:48px;font-weight:900;margin-bottom:50px">ORDA MEMBERS</h1>
            
            <div class="search-container">
                <input type="text" class="search-input" id="member-search" placeholder="Search members... (press Enter)" autocomplete="off">
                <div class="search-results" id="search-results"></div>
            </div>
            
            <h2 class="all-members-title">ALL REGISTERED ACCOUNTS</h2>
            <div class="members-grid" id="all-members"></div>
        </div>
    </div>

    <script src="analytics.js"></script>
    <script src="auth-system.js"></script>
    <script src="live-viewers.js"></script>
    <script>
        trackPageView('members');
        
        if(!ORDAAuth.isLoggedIn()){
            alert('You must be logged in to view members');
            window.location.href='login.html';
        }
        
        const rankNames=['','Private','Specialist','Corporal','Sergeant','Captain','Ensign','Loyal Soldier','Major','Lieutenant','Colonel','General','General of the Army','Admiral','Marshal','Commander'];
        
        function getBadge(badge){
            const badges={
                'gold':'<span class="verify-gold" title="Leader">‚úì</span>',
                'red':'<span class="verify-red" title="Staff">‚úì</span>',
                'black':'<span class="verify-black" title="ORDA Member">‚úì</span>',
                'blue':'<span class="verify-blue" title="Verified">‚úì</span>',
                'none':''
            };
            return badges[badge]||badges['black'];
        }
        
        const users=JSON.parse(localStorage.getItem('orda_users')||'{}');
        const allUsers=Object.keys(users);
        
        // Load all members
        function loadAllMembers(){
            const grid=document.getElementById('all-members');
            grid.innerHTML=allUsers.map(username=>{
                const user=users[username];
                const initial=username.charAt(0).toUpperCase();
                return `
                    <div class="member-card" onclick="window.location.href='profile.html?user=${username}'">
                        <div class="member-avatar">${initial}</div>
                        <div class="member-name">${username}${getBadge(user.badge||'black')}</div>
                        <div class="member-rank-label">Level ${user.rank} - ${rankNames[user.rank]}</div>
                    </div>
                `;
            }).join('');
        }
        
        loadAllMembers();
        
        // Search with case-insensitive + Enter key
        const searchInput=document.getElementById('member-search');
        const searchResults=document.getElementById('search-results');
        
        searchInput.addEventListener('input',function(e){
            const query=e.target.value.trim();
            if(query.length<1){
                searchResults.classList.remove('active');
                return;
            }
            
            const matches=allUsers.filter(u=>u.toLowerCase().includes(query.toLowerCase()));
            
            if(matches.length>0){
                searchResults.innerHTML=matches.map(username=>{
                    const user=users[username];
                    return `
                        <div class="search-result-item" onclick="viewProfile('${username}')">
                            <div>
                                <div class="result-username">${username}${getBadge(user.badge||'black')}</div>
                                <div class="result-rank">Level ${user.rank} - ${rankNames[user.rank]}</div>
                            </div>
                            <button class="view-profile-btn" onclick="event.stopPropagation();viewProfile('${username}')">VIEW PROFILE</button>
                        </div>
                    `;
                }).join('');
                searchResults.classList.add('active');
            }else{
                searchResults.innerHTML='<div class="no-results">No members found</div>';
                searchResults.classList.add('active');
            }
        });
        
        // Enter key support
        searchInput.addEventListener('keypress',function(e){
            if(e.key==='Enter'){
                const query=e.target.value.trim().toLowerCase();
                const match=allUsers.find(u=>u.toLowerCase()===query);
                if(match){
                    viewProfile(match);
                }else{
                    const partial=allUsers.find(u=>u.toLowerCase().includes(query));
                    if(partial){
                        viewProfile(partial);
                    }else{
                        alert('No member found with that name');
                    }
                }
            }
        });
        
        // Close search on click outside
        document.addEventListener('click',function(e){
            if(!searchInput.contains(e.target)&&!searchResults.contains(e.target)){
                searchResults.classList.remove('active');
            }
        });
        
        function viewProfile(username){
            window.location.href='profile.html?user='+username;
        }
        
        // Mobile menu
        const mobileToggle=document.getElementById('mobile-menu-toggle');
        const navMenu=document.getElementById('nav-menu');
        if(mobileToggle){
            mobileToggle.addEventListener('click',function(){
                this.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
        }
    </script>
</body>
</html>
